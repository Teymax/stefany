mixin penSvg
  svg(width='12' height='12' viewbox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg')
    path(d='M11.2227 0.77673C10.1898 -0.25891 8.50992 -0.25891 7.47696 0.77673L0.609311 7.64264C0.555617 7.69634 0.522379 7.76538 0.512151 7.83954L0.00334149 11.6088C-0.0119995 11.7162 0.026353 11.8236 0.100501 11.8977C0.164422 11.9616 0.253911 12 0.3434 12C0.358741 12 0.374082 12 0.389423 11.9974L2.65989 11.6906C2.8491 11.665 2.98205 11.4911 2.95648 11.3019C2.93091 11.1127 2.75705 10.9797 2.56784 11.0053L0.74738 11.2508L1.10278 8.62202L3.86927 11.3888C3.93319 11.4528 4.02268 11.4911 4.11217 11.4911C4.20166 11.4911 4.29115 11.4553 4.35507 11.3888L11.2227 4.52293C11.7239 4.02174 12 3.35688 12 2.64855C12 1.94023 11.7239 1.27537 11.2227 0.77673ZM7.60992 1.62058L8.76305 2.77385L2.49625 9.04139L1.34312 7.88812L7.60992 1.62058ZM4.11473 10.6575L2.98716 9.52981L9.25396 3.26227L10.3815 4.38996L4.11473 10.6575ZM10.8622 3.89644L8.10339 1.13729C8.45367 0.84833 8.89089 0.689787 9.35112 0.689787C9.87527 0.689787 10.3662 0.894358 10.7369 1.26259C11.1077 1.63081 11.3097 2.12434 11.3097 2.64855C11.3097 3.1114 11.1511 3.54611 10.8622 3.89644Z' fill='#FFF')

mixin arrowSvg
  svg(width='11', height='8', viewbox='0 0 11 8', xmlns='http://www.w3.org/2000/svg')
    path(d='M10.3536 4.35355C10.5488 4.15829 10.5488 3.84171 10.3536 3.64645L7.17157 0.464466C6.97631 0.269204 6.65973 0.269204 6.46447 0.464466C6.2692 0.659728 6.2692 0.976311 6.46447 1.17157L9.29289 4L6.46447 6.82843C6.2692 7.02369 6.2692 7.34027 6.46447 7.53553C6.65973 7.7308 6.97631 7.7308 7.17157 7.53553L10.3536 4.35355ZM0 4.5H10V3.5H0V4.5Z' fill='#FFF')

mixin phoneSvg
  svg(width='10' height='16' viewbox='0 0 10 16' fill='none' xmlns='http://www.w3.org/2000/svg')
    path(d='M8.8373 0H1.1627C0.523313 0 0 0.485943 0 1.08069V14.9189C0 15.5136 0.523313 16 1.1627 16H8.8373C9.47669 16 10 15.5145 10 14.9193V1.08069C10 0.485943 9.47669 0 8.8373 0ZM3.77238 0.778971H6.22762C6.30533 0.778971 6.36829 0.837486 6.36829 0.910171C6.36829 0.9824 6.30533 1.04091 6.22762 1.04091H3.77238C3.69467 1.04091 3.63171 0.9824 3.63171 0.910171C3.63171 0.837486 3.69467 0.778971 3.77238 0.778971ZM5 15.4597C4.67883 15.4597 4.41865 15.2178 4.41865 14.9189C4.41865 14.6199 4.67883 14.3785 5 14.3785C5.32117 14.3785 5.58135 14.6199 5.58135 14.9189C5.58135 15.2178 5.32117 15.4597 5 15.4597ZM9.19093 14H0.809069V1.71383H9.19093V14Z' fill='#FFF')

mixin customBtn(text)
  .btn-callback.no-svg
    .text-section&attributes(attributes)
      span= text
    .arrow-section
      +arrowSvg
mixin btnCallback(text)
  .btn-callback
    .text-section&attributes(attributes)
      +phoneSvg
      span= text
    .arrow-section
      +arrowSvg

mixin btnPen(text)
  .btn-callback
    .text-section&attributes(attributes)
      +penSvg
      span= text
    .arrow-section
      +arrowSvg


mixin btnService(text)
  .btn-callback
    .text-section&attributes(
      attributes)
      +penSvg
      span= text
    .arrow-section
      +arrowSvg

mixin sliderServices
  .podology-service-slider.owl-carousel.slider-block
    each element in [{name:"Удаление мозолей", img:"pd-feet-1", link: 'warts-treatment.html'},{name:"Удаление натоптышей",img:"pd-feet-2", link: 'warts-treatment.html'},{name:"Лечение грибка",img:"pd-feet-3", link: 'nail-fungus-treatment.html'},{name:"Обработка трещин",img:"pd-feet-4", link: 'cracking.html'},{name:"Удаление мозолей", img:"pd-feet-1", link: 'warts-treatment.html'},{name:"Удаление натоптышей",img:"pd-feet-2", link: 'warts-treatment.html'},{name:"Лечение грибка",img:"pd-feet-3", link: 'nail-fungus-treatment.html'},{name:"Обработка трещин",img:"pd-feet-4", link: 'cracking.html'},{name:"Удаление мозолей", img:"pd-feet-1", link: 'warts-treatment.html'},{name:"Удаление натоптышей",img:"pd-feet-2", link: 'warts-treatment.html'},{name:"Лечение грибка",img:"pd-feet-3", link: 'nail-fungus-treatment.html'},{name:"Обработка трещин",img:"pd-feet-4", link: 'cracking.html'},{name:"Удаление мозолей", img:"pd-feet-1", link: 'warts-treatment.html'},{name:"Удаление натоптышей",img:"pd-feet-2", link: 'warts-treatment.html'},{name:"Лечение грибка",img:"pd-feet-3", link: 'nail-fungus-treatment.html'},{name:"Обработка трещин",img:"pd-feet-4", link: 'cracking.html'}]
      - let resultPath = "./assets/img/" + element.img + ".png"
      a.diploma-item(href=element.link)
        img.w-100(src=resultPath, alt="result-image")
        .slider-item-footer.d-flex.flex-column.align-items-center.justify-content-center
          .section-bg-dark.w-100.p-1
            p.paragraph-text.text-center.mb-0 #{element.name}


mixin writeClientForm
  .callback-card&attributes(attributes)
    h3 Оставьте ваши данные
    p.text-lowercase и мы вам перезвоним
    form(method="post" action="/")
      input(type="text" placeholder="Имя" data-client-name)
      input(type="email" placeholder="Email" data-client-email)
      input(type="tel" placeholder="Телефон" data-client-phone).mb-4
      input(type="submit" style="display: none" data-btn-submit)
      +btnCallback('перезвонить мне')(data-toggle='modal', data-target='#thanksPopup')
      script(type="text/javascript")
        | (() => {
        | const form = document.currentScript.parentElement
        | const submitBtn = form.querySelector('[data-btn-submit]')
        | const triggerBtn = form.querySelector('.btn-callback')
        | form.addEventListener('submit', e => {
        |   e.preventDefault()
        |   console.log(e)
        |   const name = form.querySelector('[data-client-name]').value,
        |         email = form.querySelector('[data-client-email]').value,
        |         phone = form.querySelector('[data-client-phone]').value
        |   console.log(name, email, phone)
        |   var bearer_token = 'f5wujgx5yn6cagtk9fg2'
        |     var partnerId = 240913
        |     var managerId = 823619
        |     var date = new Date()
        |     var payload = { phone, name, email }
        |     date.setDate( date.getDate() + 1 )
        |     var dateString = date.getFullYear() + '-' + ( ( date.getMonth() ) + 1 < 10 ? '0' + ( date.getMonth() + 1 ) : date.getMonth() + 1 ) + '-' + ( date.getDate() < 10 ? '0' + date.getDate() : date.getDate() )
        |     var url = 'https://api.yclients.com/api/v1/book_times/' + partnerId + '/' + managerId + '/' + dateString + '?service_ids=3354786'
        |     var headers = {
        |       'Content-Type' : 'application/json',
        |       'Authorization': 'Bearer ' + bearer_token
        |     }
        |     var request = $.ajax( {
        |       url    : url,
        |       type   : 'GET',
        |       headers: headers
        |     } )
        |
        |     request.done( function ( msg ) {
        |       console.log( 'Time: ', msg[ 0 ].datetime )
        |       writeClient( msg[ 0 ].datetime, payload )
        |       form.querySelector('[data-client-name]').value = ''
        |       form.querySelector('[data-client-email]').value = ''
        |       form.querySelector('[data-client-phone]').value = ''
        |     } )
        |
        |     request.fail( function ( jqXHR, textStatus ) {
        |       alert( 'Request failed: ' + textStatus )
        |     } )
        | })
        | triggerBtn.addEventListener('click', e => {
        |   submitBtn.click()
        | })
        | })()
